def script_build_cbmcWin = new File(rootProject.projectDir.absolutePath + "/build" + "/com.mbeddr.analyses.cbmc/" + "build-cbmc-win.bat")
def script_build_cbmcLinux = new File(rootProject.projectDir.absolutePath + "/build" + "/com.mbeddr.analyses.cbmc/" + "build-cbmc-linux.sh")
def script_build_cbmcMac = new File(rootProject.projectDir.absolutePath + "/build" + "/com.mbeddr.analyses.cbmc/" + "build-cbmc-mac.sh")

def cbmcHome = rootProject.projectDir.absolutePath + "/../cbmc/src"

task build_cbmcWin(type: Exec) {
  workingDir cbmcHome
  //def args = buildProcSpawnArgList(['start', script_build_cbmcWin])
  //commandLine(args)
  commandLine(script_build_cbmcWin)
}

task build_cbmcMac(type: Exec) {
    workingDir cbmcHome
    def args = buildProcSpawnArgList([script_build_cbmcMac])
    commandLine(args)
}

task build_cbmcLinux(type: Exec) {
    workingDir cbmcHome
    commandLine(script_build_cbmcLinux)
}

task publish_cbmcWin(type: Zip, dependsOn: build_cbmcWin) {
    from cbmcHome
    include "cbmc-win.zip"
}

task publish_cbmcMac(type: Zip, dependsOn: build_cbmcMac) {
    from cbmcHome
    include "cbmc-mac.zip"
}

task publish_cbmcLinux(type: Zip, dependsOn: build_cbmcLinux) {
    from cbmcHome
    include "cbmc-linux.tar.gz"
}
